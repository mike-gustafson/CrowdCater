<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <%- include('../partials/header.ejs') %>
</head>

<body>
  <%- include('../partials/navBar') %>

    <div class="container">
      <div class="card row z-depth-2 main-card">
        <div class="col s3">
          <h3>Calendar</h3>
          <hr>
          <% if (user.eventsHosting.length> 0) { %>
            <h4>hosting</h4>
            <ul>
              <% user.eventsHosting.forEach(function(event) { %>
                <li>
                  <a href="/events/<%= event._id %>">
                    <%= event.name %>
                  </a>
                </li>
                <% }) %>
            </ul>
            <% } else { %>
              <p>No upcoming hosted events.</p>
              <% } %>
                <hr>
                <% if (user.eventsAttending.length> 0) { %>
                  <h4>attending</h4>
                  <ul>
                    <% user.eventsAttending.forEach(function(event) { %>
                      <li>
                        <a href="/events/<%= event._id %>">
                          <%= event.name %>
                        </a>
                      </li>
                      <% }) %>
                  </ul>
                  <% } else { %>
                    <p>Not attending any upcoming events.</p>
                    <% } %>
                      <hr>
                      <a href="events/new" class="waves-effect waves-light btn">Create Event</a>
        </div>
        <div class="col s6 account-center">
          <div class="opacity-50-dark account-dashboard">
            <h2>Dashboard</h2>
            <p>Welcome, <%= user.firstName %>!</p>
            <p>You have hosted
              <%= user.eventsHosting.length %> events so far
            </p>
            <p>You have attended
              <%= user.eventsAttending.length %> events so far
            </p>
            <p>You have connections with <%= user.connections.length %> people</p>
          </div>
        </div>
        <div class="col s3">
          <h4>Your Dishes</h4>
          <hr>
          <% if (user.dishes.length> 0) { %>
            <ul>
              <% user.dishes.forEach(function(dish) { %>
                <li>
                  <a href="/dishes/<%= dish._id %>">
                    <%= dish.name %>
                  </a>
                </li>
                <% }) %>
            </ul>
            <% } else { %>
              <p>You haven't added any dishes yet.</p>
              <% } %>
                <a href="/dishes/new" class="waves-effect waves-light btn">Add</a>
                <hr>
                <h4>Favorites</h4>
                <% if (user.favoriteDishes.length> 0) { %>
                  <ul>
                    <% user.favoriteDishes.forEach(function(dish) { %>
                      <li>
                        <a href="/dishes/<%= dish._id %>">
                          <%= dish.name %>
                        </a>
                      </li>
                      <% }) %>
                  </ul>
                  <% } else { %>
                    <p>No Favorite Dishes Yet</p>
                    <% } %>
                      <a href="/dishes/" class="waves-effect waves-light btn">Browse Dishes</a>

                      <hr>
        </div>
      </div>
</body>